<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AR Box</title>

    <!-- Updated A-Frame version -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Include AR.js for A-Frame -->
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
  </head>

  <body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="debugUIEnabled: false;">
      
      <!-- HIRO Marker -->
      <a-marker preset="hiro">
        <a-box position="0 0.5 0" material="opacity: 0.5;" color="#4CC3D9" rotation="0 90 0">
          <a-animation attribute="rotation" to="90 360 0" dur="9000" repeat="indefinite" easing="linear"></a-animation>
        </a-box>
      </a-marker>

      <!-- Kanji Marker -->
      <a-marker preset="kanji">
        <a-box position="0 0.5 0" material="opacity: 0.5;" color="#FF0000" rotation="0 90 0">
          <a-animation attribute="rotation" to="90 360 0" dur="9000" repeat="indefinite" easing="linear"></a-animation>
        </a-box>
      </a-marker>

      <!-- Custom Pattern Marker -->
      <a-marker type="pattern" url="./star.patt">
        <a-box position="0 0.5 0" material="opacity: 0.5;">
          <a-animation attribute="rotation" to="90 360 0" dur="9000" repeat="indefinite" easing="linear"></a-animation>
        </a-box>
      </a-marker>

      <!-- Interactable Box with Click Scaling -->
      <a-marker type="pattern" url="./car.patt">
        <!-- Cursor and Raycaster -->
        <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: #resizableBox">
          <a-box id="resizableBox" position="0 0.5 0" rotation="0 45 0" color="#4CC3D9"
                 event-set__enter="_event: mouseenter; color: #8FF7FF"
                 event-set__leave="_event: mouseleave; color: #4CC3D9"></a-box>
        </a-entity>
      </a-marker>

      <!-- Single Camera -->
      <a-entity camera></a-entity>

    </a-scene>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var box = document.querySelector("#resizableBox");

        // Listen for clicks on the box
        box.addEventListener("click", function (event) {
          event.stopPropagation(); // Prevent event bubbling

          // Get current scale and toggle it
          var currentScale = box.getAttribute("scale") || { x: 1, y: 1, z: 1 };
          var newScale = currentScale.x === 1 ? { x: 2, y: 2, z: 2 } : { x: 1, y: 1, z: 1 };

          box.setAttribute("scale", newScale);
        });
      });
    </script>

  </body>
</html>
